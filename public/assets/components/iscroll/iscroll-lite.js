/*!
 * iScroll Lite base on iScroll v4.1.6 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var e=Math,t=function(e){return e>>0},n=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",r="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,i="ontouchstart"in window,s=n+"Transform"in document.documentElement.style,o=/iphone|ipad/gi.test(navigator.appVersion),u=/playbook/gi.test(navigator.appVersion),a=o||u,f=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,17)}}(),l=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),c="onorientationchange"in window?"orientationchange":"resize",h=i?"touchstart":"mousedown",p=i?"touchmove":"mousemove",d=i?"touchend":"mouseup",v=i?"touchcancel":"mouseup",m="translate"+(r?"3d(":"("),g=r?",0)":")",y=function(e,t){var r=this,o=document,u;r.wrapper=typeof e=="object"?e:o.getElementById(e),r.wrapper.style.overflow="hidden",r.scroller=r.wrapper.children[0],r.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(u in t)r.options[u]=t[u];r.x=r.options.x,r.y=r.options.y,r.options.useTransform=s?r.options.useTransform:!1,r.options.hScrollbar=r.options.hScroll&&r.options.hScrollbar,r.options.vScrollbar=r.options.vScroll&&r.options.vScrollbar,r.options.useTransition=a&&r.options.useTransition,r.scroller.style[n+"TransitionProperty"]=r.options.useTransform?"-"+n.toLowerCase()+"-transform":"top left",r.scroller.style[n+"TransitionDuration"]="0",r.scroller.style[n+"TransformOrigin"]="0 0",r.options.useTransition&&(r.scroller.style[n+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),r.options.useTransform?r.scroller.style[n+"Transform"]=m+r.x+"px,"+r.y+"px"+g:r.scroller.style.cssText+=";position:absolute;top:"+r.y+"px;left:"+r.x+"px",r.refresh(),r._bind(c,window),r._bind(h),i||r._bind("mouseout",r.wrapper)};y.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,handleEvent:function(e){var t=this;switch(e.type){case h:if(!i&&e.button!==0)return;t._start(e);break;case p:t._move(e);break;case d:case v:t._end(e);break;case c:t._resize();break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e)}},_resize:function(){this.refresh()},_pos:function(e,r){e=this.hScroll?e:0,r=this.vScroll?r:0,this.options.useTransform?this.scroller.style[n+"Transform"]=m+e+"px,"+r+"px"+g+" scale("+this.scale+")":(e=t(e),r=t(r),this.scroller.style.left=e+"px",this.scroller.style.top=r+"px"),this.x=e,this.y=r},_start:function(e){var t=this,r=i?e.touches[0]:e,s,o,u;if(!t.enabled)return;t.options.onBeforeScrollStart&&t.options.onBeforeScrollStart.call(t,e),t.options.useTransition&&t._transitionTime(0),t.moved=!1,t.animating=!1,t.zoomed=!1,t.distX=0,t.distY=0,t.absDistX=0,t.absDistY=0,t.dirX=0,t.dirY=0;if(t.options.momentum){t.options.useTransform?(s=getComputedStyle(t.scroller,null)[n+"Transform"].replace(/[^0-9-.,]/g,"").split(","),o=s[4]*1,u=s[5]*1):(o=getComputedStyle(t.scroller,null).left.replace(/[^0-9-]/g,"")*1,u=getComputedStyle(t.scroller,null).top.replace(/[^0-9-]/g,"")*1);if(o!=t.x||u!=t.y)t.options.useTransition?t._unbind("webkitTransitionEnd"):l(t.aniTime),t.steps=[],t._pos(o,u)}t.startX=t.x,t.startY=t.y,t.pointX=r.pageX,t.pointY=r.pageY,t.startTime=e.timeStamp||Date.now(),t.options.onScrollStart&&t.options.onScrollStart.call(t,e),t._bind(p),t._bind(d),t._bind(v)},_move:function(t){var n=this,r=i?t.touches[0]:t,s=r.pageX-n.pointX,o=r.pageY-n.pointY,u=n.x+s,a=n.y+o,f=t.timeStamp||Date.now();n.options.onBeforeScrollMove&&n.options.onBeforeScrollMove.call(n,t),n.pointX=r.pageX,n.pointY=r.pageY;if(u>0||u<n.maxScrollX)u=n.options.bounce?n.x+s/2:u>=0||n.maxScrollX>=0?0:n.maxScrollX;if(a>0||a<n.maxScrollY)a=n.options.bounce?n.y+o/2:a>=0||n.maxScrollY>=0?0:n.maxScrollY;if(n.absDistX<6&&n.absDistY<6){n.distX+=s,n.distY+=o,n.absDistX=e.abs(n.distX),n.absDistY=e.abs(n.distY);return}n.options.lockDirection&&(n.absDistX>n.absDistY+5?(a=n.y,o=0):n.absDistY>n.absDistX+5&&(u=n.x,s=0)),n.moved=!0,n._pos(u,a),n.dirX=s>0?-1:s<0?1:0,n.dirY=o>0?-1:o<0?1:0,f-n.startTime>300&&(n.startTime=f,n.startX=n.x,n.startY=n.y),n.options.onScrollMove&&n.options.onScrollMove.call(n,t)},_end:function(n){if(i&&n.touches.length!=0)return;var r=this,s=i?n.changedTouches[0]:n,o,u,a={dist:0,time:0},f={dist:0,time:0},l=(n.timeStamp||Date.now())-r.startTime,c=r.x,h=r.y,m;r._unbind(p),r._unbind(d),r._unbind(v),r.options.onBeforeScrollEnd&&r.options.onBeforeScrollEnd.call(r,n);if(!r.moved){if(i){o=s.target;while(o.nodeType!=1)o=o.parentNode;o.tagName!="SELECT"&&o.tagName!="INPUT"&&o.tagName!="TEXTAREA"&&(u=document.createEvent("MouseEvents"),u.initMouseEvent("click",!0,!0,n.view,1,s.screenX,s.screenY,s.clientX,s.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,0,null),u._fake=!0,o.dispatchEvent(u))}r._resetPos(200),r.options.onTouchEnd&&r.options.onTouchEnd.call(r,n);return}if(l<300&&r.options.momentum){a=c?r._momentum(c-r.startX,l,-r.x,r.scrollerW-r.wrapperW+r.x,r.options.bounce?r.wrapperW:0):a,f=h?r._momentum(h-r.startY,l,-r.y,r.maxScrollY<0?r.scrollerH-r.wrapperH+r.y:0,r.options.bounce?r.wrapperH:0):f,c=r.x+a.dist,h=r.y+f.dist;if(r.x>0&&c>0||r.x<r.maxScrollX&&c<r.maxScrollX)a={dist:0,time:0};if(r.y>0&&h>0||r.y<r.maxScrollY&&h<r.maxScrollY)f={dist:0,time:0}}if(a.dist||f.dist){m=e.max(e.max(a.time,f.time),10),r.scrollTo(t(c),t(h),m),r.options.onTouchEnd&&r.options.onTouchEnd.call(r,n);return}r._resetPos(200),r.options.onTouchEnd&&r.options.onTouchEnd.call(r,n)},_resetPos:function(e){var t=this,n=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,r=t.y>=0||t.maxScrollY>0?0:t.y<t.maxScrollY?t.maxScrollY:t.y;if(n==t.x&&r==t.y){t.moved&&(t.options.onScrollEnd&&t.options.onScrollEnd.call(t),t.moved=!1);return}t.scrollTo(n,r,e||0)},_mouseout:function(e){var t=e.relatedTarget;if(!t){this._end(e);return}while(t=t.parentNode)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind("webkitTransitionEnd"),t._startAni()},_startAni:function(){var t=this,n=t.x,r=t.y,i=Date.now(),s,o,u;if(t.animating)return;if(!t.steps.length){t._resetPos(400);return}s=t.steps.shift(),s.x==n&&s.y==r&&(s.time=0),t.animating=!0,t.moved=!0;if(t.options.useTransition){t._transitionTime(s.time),t._pos(s.x,s.y),t.animating=!1,s.time?t._bind("webkitTransitionEnd"):t._resetPos(0);return}u=function(){var a=Date.now(),l,c;if(a>=i+s.time){t._pos(s.x,s.y),t.animating=!1,t.options.onAnimationEnd&&t.options.onAnimationEnd.call(t),t._startAni();return}a=(a-i)/s.time-1,o=e.sqrt(1-a*a),l=(s.x-n)*o+n,c=(s.y-r)*o+r,t._pos(l,c),t.animating&&(t.aniTime=f(u))},u()},_transitionTime:function(e){this.scroller.style[n+"TransitionDuration"]=e+"ms"},_momentum:function(n,r,i,s,o){var u=6e-4,a=e.abs(n)/r,f=a*a/(2*u),l=0,c=0;return n>0&&f>i?(c=o/(6/(f/a*u)),i+=c,a=a*i/f,f=i):n<0&&f>s&&(c=o/(6/(f/a*u)),s+=c,a=a*s/f,f=s),f*=n<0?-1:1,l=a/u,{dist:f,time:t(l)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent)t-=e.offsetLeft,n-=e.offsetTop;return{left:t,top:n}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var e=this;e.scroller.style[n+"Transform"]="",e._unbind(c,window),e._unbind(h),e._unbind(p),e._unbind(d),e._unbind(v),e._unbind("mouseout",e.wrapper),e.options.useTransition&&e._unbind("webkitTransitionEnd"),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var e=this,t;e.wrapperW=e.wrapper.clientWidth,e.wrapperH=e.wrapper.clientHeight,e.scrollerW=e.scroller.offsetWidth,e.scrollerH=e.scroller.offsetHeight,e.maxScrollX=e.wrapperW-e.scrollerW,e.maxScrollY=e.wrapperH-e.scrollerH,e.dirX=0,e.dirY=0,e.hScroll=e.options.hScroll&&e.maxScrollX<0,e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH),t=e._offset(e.wrapper),e.wrapperOffsetLeft=-t.left,e.wrapperOffsetTop=-t.top,e.scroller.style[n+"TransitionDuration"]="0",e._resetPos(200)},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop(),s.length||(s=[{x:e,y:t,time:n,relative:r}]);for(o=0,u=s.length;o<u;o++)s[o].relative&&(s[o].x=i.x-s[o].x,s[o].y=i.y-s[o].y),i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0});i._startAni()},scrollToElement:function(t,n){var r=this,i;t=t.nodeType?t:r.scroller.querySelector(t);if(!t)return;i=r._offset(t),i.left+=r.wrapperOffsetLeft,i.top+=r.wrapperOffsetTop,i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left,i.top=i.top>0?0:i.top<r.maxScrollY?r.maxScrollY:i.top,n=n===undefined?e.max(e.abs(i.left)*2,e.abs(i.top)*2):n,r.scrollTo(i.left,i.top,n)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(p),this._unbind(d),this._unbind(v)},enable:function(){this.enabled=!0},stop:function(){l(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1}},typeof exports!="undefined"?exports.iScroll=y:window.iScroll=y})();